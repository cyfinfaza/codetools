(this["webpackJsonpcodetools-react"]=this["webpackJsonpcodetools-react"]||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(45),i=n.n(r),o=n(3),s=n(47),l=n(8),d=n.n(l),u=n(4),j=n(15),b=n(5),h=(n(53),n(0));function m(e){var t=e.children,n=e.onClose,c=e.open,a=e.title,r=e.noCloseButton,i=void 0!==r&&r;return Object(h.jsxs)("div",{className:"modal",style:c?{opacity:1,transform:"none",pointerEvents:"all"}:{opacity:0,transform:"scale(0.8)",pointerEvents:"none"},children:[Object(h.jsx)("h1",{style:{marginTop:0},children:a}),t,!i&&Object(h.jsx)("button",{className:"hoverfancy",style:{position:"absolute",top:"16px",right:"16px",width:"48px",height:"48px",display:"flex",WebkitAlignItems:"center",WebkitBoxAlign:"center",msFlexAlign:"center",alignItems:"center",WebkitBoxPack:"center",WebkitJustifyContent:"center",msFlexPack:"center",justifyContent:"center"},onClick:n,children:Object(h.jsx)("i",{className:"material-icons",style:{color:"white"},children:"close"})})]})}function p(e){var t=e.name,n=e.compareKey,c=e.changeKeyMethod,a=e.keyName,r="clickfancy";return a==n&&(r+=" tab_clicked"),Object(h.jsx)("div",{className:r,onClick:function(){return c(a)},children:t})}var x=n(46);function f(e){var t=e.arg,n=e.onDelete,c=e.onChange,a=t.text,r=t.output,i=t.id,o=t.match,s=null;return null!=o&&(s=o?"#0F0":"#FD0"),Object(h.jsxs)("div",{className:"arg_mutable arg",children:[Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("p",{children:"("}),Object(h.jsx)("input",{type:"text",className:"argin monofont",value:a,onChange:function(e){return c(e,i)},placeholder:"args",size:"1"}),Object(h.jsx)("p",{children:")"}),Object(h.jsx)("button",{className:"removeButton hoverfancy",onClick:function(){return n(i)},children:Object(h.jsx)("i",{className:"material-icons",children:"close"})})]}),Object(h.jsxs)("p",{className:"resultText monofont",children:[Object(h.jsx)("i",{className:"material-icons outputArrow",style:{width:24,transform:"translateY(25%)",color:s},children:"arrow_forwards"}),Object(h.jsx)("span",{className:"resultOutput",children:r})]})]})}function O(e){var t=e.arg,n=t.text,c=t.output,a=t.match,r=null;return null!=a&&(r=a?"#0F0":"#FD0"),Object(h.jsxs)("div",{className:"arg_readonly arg",children:[Object(h.jsx)("div",{className:"inputdiv",children:Object(h.jsxs)("p",{children:["( ",Object(h.jsx)("span",{className:"argText",children:n})," )"]})}),Object(h.jsxs)("p",{className:"resultText monofont",children:[Object(h.jsx)("i",{className:"material-icons outputArrow",style:{width:24,transform:"translateY(25%)",color:r},children:"arrow_forwards"}),Object(h.jsx)("span",{className:"resultOutput",children:c})]})]})}n(57);var g,y,v,C=1,N=!1,k=!1,w={code:"java",starterCode:"java",description:"html"},S={code:{wordWrap:"off"},starterCode:{wordWrap:"off"},description:{wordWrap:"on"}};function _(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*c));return t}var D=function(e){var t,n,a,r,i,l,D=e.editorType,F=e.contentID,E=Object(c.useState)({title:null,timeout:null}),I=Object(b.a)(E,2),T=I[0],A=I[1],B=Object(c.useState)(!1),W=Object(b.a)(B,2),K=W[0],R=W[1],L=Object(c.useState)("contentLoading"),M=Object(b.a)(L,2),J=M[0],z=M[1],P=Object(c.useState)(null),Y=Object(b.a)(P,2),q=Y[0],H=Y[1],U=Object(c.useState)(null),G=Object(b.a)(U,2),Q=(G[0],G[1],Object(c.useState)({code:null,starterCode:null,description:null})),V=Object(b.a)(Q,2),X=V[0],Z=V[1],$=Object(c.useState)([]),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useRef)();ce.current=te;var ae=Object(c.useState)([]),re=Object(b.a)(ae,2),ie=re[0],oe=re[1],se=Object(c.useRef)();se.current=ie;var le=Object(c.useState)({icon:"info",text:"Connecting to ECWS",style:"fancybutton_warn",enabled:!1}),de=Object(b.a)(le,2),ue=de[0],je=de[1],be=X[q];function he(){return me.apply(this,arguments)}function me(){return(me=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=C||!N){e.next=6;break}return C+=1,k=!0,e.next=5,fetch("/contentset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(e){C=1}));case 5:k&&R(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){var t=te.filter((function(t){return t.id!==e}));ne(t)}function xe(e,t){var n=te.map((function(n){return n.id==t&&(n.text=e.target.value),n}));ne(n)}function fe(){return(fe=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je({icon:"hourglass_full",text:"Saving...",style:"fancybutton_half",enabled:!1}),e.next=3,he();case 3:return je({icon:"hourglass_full",text:"Requesting...",style:"fancybutton_half",enabled:!0}),e.next=6,fetch("/fetchsession").then((function(e){return e.json()})).then((function(e){return t=e.data}));case 6:console.log(t),y.send(JSON.stringify({contentID:F,id_sig:v,auth:t}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/contentget?id="+F).then((function(e){return e.json()})).then(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"error"!=t.status){e.next=5;break}return z("fatalError"),console.error(t),e.abrupt("return");case 5:if(t=t.data,n={},(c={}).code=t.code,v=t.id_sig,ne(t.args_mutable.map((function(e){return{id:e.id,text:e.arg,output:"No Output"}}))),"editor_standalone"!=D&&"challenge"!=D||(n.title=t.title,c.description=t.description),"challenge"==D&&(c.starterCode=t.starterCode),t.timeout&&(n.timeout=t.timeout),"editor_challenge"!=D){e.next=18;break}return e.next=17,fetch("/contentget?id="+t.assocChallenge).then((function(e){return e.json()})).then((function(e){e=e.data,n.title=e.title,c.description=e.description}));case 17:oe(t.args_immutable.map((function(e){return{id:e.id,text:e.arg,output:"No Output"}})));case 18:Z(c),Object(u.a)({},c),A(n),Object(u.a)({},n),setInterval(he,1e4),z(null),H("code");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),z("fatalError")}));case 2:(y=new WebSocket("wss://upstairs-direct.secure1.cy2.me/ecws/runcode")).addEventListener("open",(function(){je({icon:"play_arrow",text:"Run Code",style:"",enabled:!0})})),y.addEventListener("message",(function(e){var t=JSON.parse(e.data);"statusUpdate"===t.type?je({icon:"hourglass_full",text:t.status,style:"fancybutton_half",enabled:!0}):"error"===t.type?je({icon:"error",text:t.error,style:"fancybutton_error",enabled:!0}):"jobComplete"===t.type&&(je({icon:"check_circle",text:"Tests Complete",style:"fancybutton_on",enabled:!0}),ne(ce.current.map((function(e){var n=t.data.filter((function(t){return t.id===e.id}))[0];return n?Object(u.a)(Object(u.a)({},e),n):e}))),oe(se.current.map((function(e){var n=t.data.filter((function(t){return t.id===e.id}))[0];return n?Object(u.a)(Object(u.a)({},e),n):e}))))})),y.addEventListener("close",(function(e){je({icon:"error",text:"ECWS Offline",style:"fancybutton_error",enabled:!1})}));case 6:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){var e=te.map((function(e){return{id:e.id,arg:e.text}})),t=Object(u.a)(Object(u.a)(Object(u.a)({contentID:F},X),T),{},{args_mutable:e});for(var n in t)null!==t[n]&&void 0!==t[n]||delete t[n];g=t,R(!0),k=!1}),[X,T,te]),Object(c.useEffect)((function(){N=K}),[K]),Object(c.useEffect)((function(){console.info("ECWS Run: "+ue.text)}),[ue]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"modalContainer",style:null==J?{}:{backgroundColor:"#8884"},children:[Object(h.jsx)(m,{open:"changeTitle"==J,title:"Change Title",onClose:function(){return z(null)},children:Object(h.jsx)("input",{onKeyDown:function(e){13==e.keyCode&&z(null)},type:"text",style:{width:"100%",boxSizing:"border-box",height:"32px"},value:T.title?T.title:"",onChange:function(e){return A(Object(u.a)(Object(u.a)({},T),{},{title:e.target.value}))},placeholder:"New title"})}),Object(h.jsx)(m,{open:"editConfig"==J,title:"Edit Config",onClose:function(){return z(null)},children:Object(h.jsxs)("div",{style:(t={display:"flex",flexDirection:"row",msFlexDirection:"row"},Object(o.a)(t,"flexDirection","row"),Object(o.a)(t,"alignItems","center"),Object(o.a)(t,"WebkitBoxAlign","center"),Object(o.a)(t,"msFlexAlign","center"),Object(o.a)(t,"alignItems","center"),t),children:[Object(h.jsxs)("label",{style:{marginRight:"10px"},htmlFor:"timeout",children:["Timeout:"," "]}),Object(h.jsx)("select",{value:T.timeout?T.timeout:5,onChange:function(e){return A(Object(u.a)(Object(u.a)({},T),{},{timeout:parseInt(e.target.value)}))},children:function(){for(var e=[],t=1;t<=15;t++)e.push(Object(h.jsx)("option",{value:t,children:t+" seconds"},t));return e}()})]})}),Object(h.jsx)(m,{open:"contentLoading"==J,title:"Content Loading...",noCloseButton:!0,onClose:function(){return z(null)},children:Object(h.jsx)("div",{className:"loadingBar",style:{width:"100%",height:8}})}),Object(h.jsx)(m,{open:"fatalError"==J,title:"Fatal Error",noCloseButton:!0,onClose:function(){return z(null)},children:Object(h.jsx)("p",{children:"An error has caused this editor to stop. Check the console for details. Reoad the editor."})})]}),Object(h.jsxs)("div",{className:"editor-main",style:null==J?{}:{pointerEvents:"none",userSelect:"none"},children:[Object(h.jsxs)("div",{id:"descriptionSidebar",className:"sidebar",children:[Object(h.jsx)("h1",{id:"contentTitle",style:{marginBottom:"0"},children:null==T.title?"Loading...":T.title}),"editor_challenge"!=D&&Object(h.jsx)("button",{style:{margin:"12px",marginLeft:"0"},onClick:function(){return z("changeTitle")},children:"Change Title"}),Object(h.jsx)("p",{style:{marginTop:"24px"},id:"contentDescription",children:null==X.description?"Loading...":X.description})]}),Object(h.jsxs)("div",{className:"threeCenter",children:["editor_standalone"==D&&Object(h.jsxs)("div",{className:"tabs",children:[Object(h.jsx)(p,{name:"Code",keyName:"code",compareKey:q,changeKeyMethod:H}),Object(h.jsx)(p,{name:"Description",keyName:"description",compareKey:q,changeKeyMethod:H})]}),"challenge"==D&&Object(h.jsxs)("div",{className:"tabs",children:[Object(h.jsx)(p,{name:"Solution",keyName:"code",compareKey:q,changeKeyMethod:H}),Object(h.jsx)(p,{name:"Starter Code",keyName:"starterCode",compareKey:q,changeKeyMethod:H}),Object(h.jsx)(p,{name:"Description",keyName:"description",compareKey:q,changeKeyMethod:H})]}),"editor_challenge"==D&&Object(h.jsx)("div",{className:"tabs",children:Object(h.jsx)(p,{name:"Code",keyName:"code",compareKey:q,changeKeyMethod:H})}),Object(h.jsx)(x.a,{id:"monacoContainer",className:"monacoContainer",defaultLanguage:w[q],theme:"vs-dark",options:Object(u.a)({minimap:{enabled:!1}},S[q]),value:be,path:q,onChange:function(e){var t=Object(u.a)({},X);t[q]=e,Z(t)}})]}),Object(h.jsxs)("div",{id:"argsSidebar",className:"sidebar",children:[Object(h.jsx)("h1",{children:"challenge"==D?"Prepare Tests":"Run and Test"}),Object(h.jsxs)("button",{id:"runbutton",className:"fancybutton "+(ue.enabled?"fancybutton_enabled ":"")+ue.style,style:{width:"100%",margin:"0"},onClick:ue.enabled?function(){return fe.apply(this,arguments)}:null,children:[Object(h.jsx)("i",{className:"material-icons",children:ue.icon}),Object(h.jsx)("span",{children:ue.text})]}),Object(h.jsxs)("div",{id:"compilerError",style:(n={display:"none",flexDirection:"column",msFlexDirection:"column"},Object(o.a)(n,"flexDirection","column"),Object(o.a)(n,"alignItems","center"),Object(o.a)(n,"WebkitBoxAlign","center"),Object(o.a)(n,"msFlexAlign","center"),Object(o.a)(n,"alignItems","center"),Object(o.a)(n,"color","#F88"),n),children:[Object(h.jsxs)("p",{style:(a={display:"flex",alignItems:"center",WebkitBoxAlign:"center",msFlexAlign:"center"},Object(o.a)(a,"alignItems","center"),Object(o.a)(a,"marginBottom","8px"),a),children:[Object(h.jsx)("i",{className:"material-icons",style:{marginRight:"8px"},children:"warning"})," ","Compiler Error"]}),Object(h.jsx)("p",{id:"compilerErrorText",className:"monofont",style:{margin:"0",fontSize:"12px",msFlexItemAlign:"flex-start",alignSelf:"flex-start"},children:"Error not displayed."})]}),"editor_challenge"==D&&Object(h.jsx)("div",{id:"challengeCompletedMessage",style:(r={display:"none",flexDirection:"column",msFlexDirection:"column"},Object(o.a)(r,"flexDirection","column"),Object(o.a)(r,"alignItems","center"),Object(o.a)(r,"WebkitBoxAlign","center"),Object(o.a)(r,"msFlexAlign","center"),Object(o.a)(r,"alignItems","center"),Object(o.a)(r,"color","#8F8"),r),children:Object(h.jsxs)("p",{style:(i={display:"flex",alignItems:"center",WebkitBoxAlign:"center",msFlexAlign:"center"},Object(o.a)(i,"alignItems","center"),Object(o.a)(i,"marginBottom","8px"),i),children:[Object(h.jsx)("i",{className:"material-icons",style:{marginRight:"8px"},children:"check_circle"})," ","Challenge Completed"]})}),Object(h.jsxs)("div",{id:"argslist",style:{minHeight:"24px"},children:[ie.map((function(e){return Object(h.jsx)(O,{arg:e},e.id)})),te.map((function(e){return Object(h.jsx)(f,{arg:e,onChange:xe,onDelete:pe},e.id)}))]}),Object(h.jsxs)("div",{style:(l={display:"flex",flexDirection:"column",msFlexDirection:"column"},Object(o.a)(l,"flexDirection","column"),Object(o.a)(l,"alignItems","center"),Object(o.a)(l,"WebkitBoxAlign","center"),Object(o.a)(l,"msFlexAlign","center"),Object(o.a)(l,"alignItems","center"),Object(o.a)(l,"width","100%"),l),children:[Object(h.jsxs)("button",{className:"hoverfancy",onClick:function(){var e=Object(s.a)(te);e.push({id:_(10),output:"No Output",text:""}),ne(e)},style:{paddingRight:"12px",marginTop:"12px"},children:[Object(h.jsx)("i",{className:"material-icons",children:"add"})," New Test"]}),"editor_challenge"!=D&&Object(h.jsxs)("button",{id:"setConfiguration",className:"hoverfancy",onClick:function(){return z("editConfig")},style:{paddingRight:"10px",marginTop:"12px"},children:[Object(h.jsx)("i",{className:"material-icons",style:{marginRight:"4px",fontSize:"24px"},children:"tune"}),"Config"]})]})]})]}),Object(h.jsxs)("div",{id:"uploadStatusDiv",className:"uploadStatusDiv uploadStatusColored",style:{backgroundColor:K?"#FD0":"#0F0"},children:[Object(h.jsx)("i",{id:"uploadStatusIcon",className:"material-icons",style:{marginRight:"4px"},children:K?"sync":"cloud_done"}),Object(h.jsx)("span",{id:"uploadStatusText",children:K?"Saving...":"Saved"})]}),Object(h.jsx)("div",{className:"uploadStatusLine uploadStatusColored",style:{backgroundColor:K?"#FD0":"#0F0"},children:"something"})]})};console.log(window.location.pathname),i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(D,{editorType:"editor_challenge",contentID:"7181559b-0de6-4b78-b40d-3b719fbe8fb7"})}),document.getElementById("root"))},53:function(e,t,n){},86:function(e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.0b211b07.chunk.js.map